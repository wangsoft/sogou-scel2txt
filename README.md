# sogou-scel2txt
搜狗词库scel转换为可读txt格式

`.scel` 是搜狗拼音输入法所使用的细胞词库格式，可以在 https://pinyin.sogou.com/dict/ 下载。

| #    | 范围           | 描述                         |
| ---- | -------------- | ---------------------------- |
|      | 0x00 - 0x11F   | 未知                         |
| a    | 0x120 - 0x123  | 不展开重码的词条数（编码数） |
| b    | 0x124 - 0x127  | 展开重码的词条数（词数）     |
|      | 0x128 - 0x12B  | 未知，和 a 有关              |
|      | 0x12C - 0x12F  | 未知，和 b 有关              |
|      | 0x130 - 0x337  | 词库名                       |
|      | 0x338 - 0x53F  | 地点？                       |
|      | 0x540 - 0xD3F  | 备注                         |
|      | 0xD40 - 0x153F | 示例词                       |

从 0x1540 开始。

前两个字节是拼音表的长度。这里 `9D 01` 就表示有 `0x100 * 0x01 + 0x9D = 413` 组。

后两个字节意义不明，一般是 0。

从 0x1544 开始就是拼音表正文部分。

| #    | 占用字节数 | 描述                                     |
| ---- | ---------- | ---------------------------------------- |
|      | 2          | 索引，从 `00 00` 到 `9C 01`              |
| a    | 2          | 拼音字节的长度                           |
|      | a          | 拼音，utf-16le 编码，一个字母占 2 字节。 |

**带英文词库的索引：** 从拼音表的长度往后，依次是 abcd。比如表长 413，最大索引`9D 01`，则下一个索引`9E 01`表示字母 a，依次类推。

偏移量 0x2628

| #    | 占用字节数 | 描述               |
| ---- | ---------- | ------------------ |
|      | 2          | 同一个音有多少词   |
| a    | 2          | 拼音索引的字节长度 |
|      | a          | 拼音索引数组       |
| b    | 2          | 词占用字节数       |
|      | b          | 词，utf-16le 编码  |
| c    | 2          | 描述信息字节长度   |
|      | c          | 描述               |

一些新的 `.scel` 文件最后有一个黑名单词库。

前 12 个字节表示标识 `DELTBL`。

接下来 2 个字节表示黑名单词库词条数。

| #    | 占用字节数 | 描述 |
| ---- | ---------- | ---- |
| a    | 2          | 词长 |
|      | a*2        | 词   |
